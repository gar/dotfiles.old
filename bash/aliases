# bash
alias ea="vim ~/.dotfiles/bash/aliases && source ~/.dotfiles/bash/aliases"
alias reload="source ~/.bashrc"
alias l="ls -alGh"
alias c="cd"
alias ..="cd .."
alias tz="tar zxf"
alias tj="tar jxf"
alias get="curl -O"
alias tree="tree -C"
alias h="history"

# vim
alias v="vim"

# mac os x
alias oc="open -a /Applications/Google\ Chrome.app"

# git
alias g="git status"
alias go="git checkout"
alias ga="git add"
alias ga.="git add ."
alias gd="git diff"
alias gp="git push"
alias gl="git pull"
alias gh="git log"
alias gb="git branch"
alias gcl="git clone"
alias ggr="git grep"
alias gam="git commit --amend"
alias gst="git stash"
function gg {
  git commit -m "$*"
}

# create a directory and change into it
function mcd {
  mkdir $1
  cd $1
}

# find the local ip address
# TODO make this more robust
function localip {
  ifconfig |
  grep 192.168 |
  awk '{print $2}'
}

# push local public key to remote server
function pushkey {
  # if no key pair, generate it
  if [ ! -f ~/.ssh/id_rsa ];
  then
    echo "no key pair exists, generating new pair..."
    ssh-keygen -f ~/.ssh/id_rsa -t rsa
  fi

  # push key to server
  cat ~/.ssh/id_rsa.pub |
    ssh $1 "test -d .ssh || mkdir .ssh && chmod 700 .ssh; cat >> .ssh/authorized_keys; chmod 600 .ssh/authorized_keys"
}

# show the most recently used commands on this box
# command is in $4 due to HISTTIMEFORMAT putting date and time in $2 and $3
function mostusedcmds {
  history |
    awk '{a[$4]++}END{for(i in a){print a[i] " " i}}' |
    sort -rn |
    head -20
}
